---
phase: 01-enable-list-drag-and-drop
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/ListColumn.jsx
  - frontend/src/components/AddListForm.jsx
autonomous: true

must_haves:
  truths:
    - "ListColumn header Box spreads dragHandleProps so the column can be grabbed"
    - "ListColumn reduces opacity when isDragging is true"
    - "AddListForm renders disabled/non-interactive when its disabled prop is true"
  artifacts:
    - path: "frontend/src/components/ListColumn.jsx"
      provides: "Drag-handle-aware list column component"
      contains: "dragHandleProps"
    - path: "frontend/src/components/AddListForm.jsx"
      provides: "Disableable add-list button/form"
      contains: "disabled"
  key_links:
    - from: "ListColumn header Box"
      to: "dragHandleProps"
      via: "spread {...dragHandleProps}"
      pattern: "dragHandleProps"
    - from: "AddListForm Button"
      to: "disabled prop"
      via: "disabled={disabled || isPending}"
      pattern: "disabled"
---

<objective>
Prepare ListColumn and AddListForm to accept the new props that BoardPage will pass
once list drag-and-drop is wired up.

Purpose: BoardPage (Plan 03) will pass `dragHandleProps` and `isDragging` to each
ListColumn, and `disabled` to AddListForm. This plan makes those components ready to
receive those props — keeping the changes isolated and reviewable before the full wiring.

Output:
  - ListColumn.jsx — accepts dragHandleProps (spread on header) + isDragging (opacity)
  - AddListForm.jsx — accepts disabled prop (disables button and form inputs)
</objective>

<execution_context>
../.github/skills/execute-plan/SKILL.md
@.gsd/templates/summary.md
</execution_context>

<context>
@.gsd/PROJECT.md
@.gsd/ROADMAP.md
@frontend/src/components/ListColumn.jsx
@frontend/src/components/AddListForm.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1 — ListColumn: add dragHandleProps + isDragging props</name>
  <files>frontend/src/components/ListColumn.jsx</files>
  <action>
    1. Add `dragHandleProps` and `isDragging` to the destructured props:

       Before:
         const ListColumn = ({ list, boardId, onDelete, onCardClick }) => {

       After:
         const ListColumn = ({ list, boardId, onDelete, onCardClick, dragHandleProps, isDragging }) => {

    2. Update the wrapping Paper's sx to reduce opacity during drag:

       Add `opacity: isDragging ? 0.8 : 1` to the Paper's `sx` prop. The Paper is the
       outermost element returned — add `opacity` alongside the existing `elevation={2}` props.

    3. Spread dragHandleProps onto the Column Header Box (the Box with px/pt/pb and gap props
       that contains the title/delete button). This is the drag handle area — only the header
       initiates a list drag, cards within the column scroll normally.

       Add `{...dragHandleProps}` as a spread prop on that Box. Also add a cursor style so
       users get a grab affordance on the header:
         cursor: dragHandleProps ? 'grab' : 'default'
       Place this inside the Box's `sx` prop.

    Both props are optional (BoardPage currently passes neither) — spreading `undefined`
    dragHandleProps is a no-op so existing card DnD is unaffected until Plan 03 wires
    the Draggable.
  </action>
  <verify>
    Grep confirms props are accepted:
      grep "dragHandleProps" frontend/src/components/ListColumn.jsx
    Should show at least two matches (destructure + spread on header Box).

    Grep confirms isDragging opacity:
      grep "isDragging" frontend/src/components/ListColumn.jsx
    Should show the opacity assignment.
  </verify>
  <done>
    ListColumn accepts dragHandleProps and isDragging.
    Header Box spreads dragHandleProps.
    Paper has reduced opacity (0.8) when isDragging is true.
    Existing card DnD is unaffected (no behavioural change until dragHandleProps are passed).
  </done>
</task>

<task type="auto">
  <name>Task 2 — AddListForm: add disabled prop</name>
  <files>frontend/src/components/AddListForm.jsx</files>
  <action>
    1. Add `disabled` to the destructured props:

       Before:
         const AddListForm = ({ boardId }) => {

       After:
         const AddListForm = ({ boardId, disabled = false }) => {

    2. In the collapsed state (the `!open` branch), disable the "Add list" Button when
       `disabled` is true. Update the Button's `disabled` prop:

       Before:
         <Button
           variant="contained"
           startIcon={<AddIcon />}
           onClick={handleOpen}

       After:
         <Button
           variant="contained"
           startIcon={<AddIcon />}
           onClick={handleOpen}
           disabled={disabled}

    3. In the expanded (form open) state, add `disabled={disabled || isPending}` to both
       the text field TextField and the submit Button, and also to the close IconButton.
       This prevents form interaction when a list drag is in progress mid-form-open.

       The TextField currently has `disabled={isPending}` — change it to
       `disabled={disabled || isPending}`.

       The submit Button currently has `disabled={isPending || !title.trim()}` — change
       it to `disabled={disabled || isPending || !title.trim()}`.

       The close IconButton currently has `disabled={isPending}` — change to
       `disabled={disabled || isPending}`.

    The default `disabled = false` means all existing behaviour is preserved when the
    prop is not supplied.
  </action>
  <verify>
    Grep confirms prop is used:
      grep "disabled" frontend/src/components/AddListForm.jsx
    Should show multiple matches covering the Button (collapsed), TextField, submit Button,
    and close IconButton.
  </verify>
  <done>
    AddListForm accepts a `disabled` prop (default false).
    When disabled=true: the "Add list" button cannot be clicked, and if the form is
    already open the text field and buttons are non-interactive.
    Existing behaviour is unchanged when disabled is not passed.
  </done>
</task>

</tasks>

<verification>
Confirm both grep checks from each task's verify section return expected results.
No import changes needed — both tasks are purely prop additions.
</verification>

<success_criteria>
- ListColumn spreads dragHandleProps on its header Box and applies 0.8 opacity when isDragging
- AddListForm accepts disabled prop and passes it through to prevent interaction during list drag
- Both components remain backwards-compatible (no behaviour change when new props are absent)
</success_criteria>

<output>
After completion, create `.gsd/phases/01-enable-list-drag-and-drop/01-02-SUMMARY.md`
</output>
